
---
### Почитать
- [Нормализация отношений. Шесть нормальных форм ](https://habr.com/ru/articles/254773/)

sql - join:
- [SQL углубимся ](https://www.flenov.info/books/read/free-sql-book/103)
- [Таблицы - Таблицы и еще таблицы](https://www.flenov.info/books/read/free-sql-book/104)
- [Агрегатные функции SQL](https://www.flenov.info/books/read/free-sql-book/105)
- [Группировка](https://www.flenov.info/books/read/free-sql-book/106)


----


- База данных - это хранилище для нескольких таблиц.
- Реляционная база данных - данные хранятся в виде таблицы. Реляционная (relationship) - потому что все данные связаны между собой.
Есть таблицы, они связаны между собой и они должны храниться вместе в одной базе данных. Все эти таблицы собираются в одно хранилище, называемые бд и бд отвечает за их хранение и можно указать связи между таблицами ![[Screenshot 2024-09-12 at 2.48.32 PM.png]]


#Оптимизация_БД
- В зависимости от кодировки, занимает разное кол-во памяти.
	Если в поле много символов - лучше завести справочник. Например колонку с городами заменить на цифры. 
	 ![[Screenshot 2024-09-12 at 2.31.17 PM.png]]

	- Если можно разделить информацию - разделяй!!!
	![[Screenshot 2024-09-12 at 2.33.20 PM.png]]

	- Пол можно не выделять, а писать как есть - смотреть по ситуации

	- Если есть какой-то `код`, например это классы, которые нужно в дальнейшем изменить с рус на англ буквы и чтобы не менять 1 млн записей, лучше присвоить классам цифры, а потом поменять нужные поля, как в примере ниже.
	![[Screenshot 2024-09-12 at 2.42.43 PM.png]]

---
### Команды 

- `in` можно перевести как "одно из", удобно использовать когда нужно перечислить несколько значений
![[Screenshot 2024-09-14 at 4.10.49 PM.png]]

- `like` используется для поиска по символу, а `_` означает любой другой символ ('d__' - ищем людей у который фамилия начинается на "D" и имеет еще 2 сивола)
![[Screenshot 2024-09-14 at 4.15.25 PM.png]]
	если не знаем кол-во символов - использовать `%` (`SELECT * FROM phone WHERE lastname like 'D%'`) + можно использовать так: `'%o%'`,  `'%e'` ...

- `SELECT * FROM phone WHERE phoneid between 4 and 6;` - выбрать включая от 4 до 6

- `is` - для поиска строк, где пустое значение 
`NULL` - пустота, отсутствующее значение, не действительное, не существующее, т.е. в этой ячейке нет никакого значения. 

"" - пустая строка - это значение
NULL - вообще ничего нет
		![[Screenshot 2024-09-14 at 4.59.25 PM.png]]

![[Screenshot 2024-09-14 at 4.30.40 PM.png]]


- для сортировки:
	`SELECT * FROM phone ORDER BY lastname ASC, firstname ASC;`
	ASC - in ascending order
	DESC - in descending order 

- для добавления значения в таблицу:
	`INSERT имя таблицы VALUES ()`
	- ==ключевое поле (первая колонка) - автоматически увеличивается при добавлении значения и его значение предоставлять не обязательно, но можно это сделать, однако это очень плохо, не рекомендуется!!!==
- добавить значения только для указанных колонок:  
	`INSERT phone (firstname, phone) VALUES ('Mary', '482935');` 

- изменить значение:
	`UPDATE phone SET columname = value WHERE lastname is NULL and firstname = '';` (`UPDATE phone SET firstname = 'David' WHERE phoneid = 16;`)

- `limit` показывает ограниченное кол-во записей, если указать два числа, то первое - сколько пропустить, второе - сколько показать (пропустить 10 страниц на сайте и показать на 11 странице 6 записей):
	`select firstname, lastname from phone limit 10, 6;

- показать уникальные имена (по конкретным колонкам):
	`select distinct lastname from phone;`

- сложение колонок (любые мат. операции):
	`select *, phoneid + cityid from phone;`
	для строк:
	`select concat(firstname, ' ', lastname) from phone;`

- псевдонимы (можно делать через пробелы, пропуская `as`):
	`select concat(firstname, ' ', lastname) as DisplayName from phone;`

- join - связи таблиц (возвращает только те записи, которые есть и в одной, и в другой таблице): 
	`SELECT * FROM phone JOIN city ON phone.cityid = city.cityid;`
	чтобы не было повторов `cityid` - указать нужные колонки, с использованием псевдонимов
![[Screenshot 2024-09-16 at 6.47.59 PM.png]]
>Left join - означает, что все записи слева от `LEFT` будут выведены (все записи phone): 
>`SELECT * FROM phone p LEFT JOIN city c ON p.cityid = c.cityid;`

>Right join: используется редко, можно реализовать с помощью левого . 
>"Казахи никогда не отступают назад - потому что у них в языке нет слова назад"

- 