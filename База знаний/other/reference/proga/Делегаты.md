---
tags:
  - делегаты
  - программирование
создал заметку: 2024-04-21
---
__Делегат — это тип данных, который хранит ссылку на метод с заданным набором аргументов и типом выходного значения.__
##### Делегаты:
- это указатели на метод
- дают возможность передавать аргумент другим функциям
- делегат, это уровень класса, объявляются в namespace

##### Оказывает влияние  на два аспекта программирования:
 - программирование пользовательских интерфейсов (на событиях, которые основаны на делегатах - построено все)
 - функциональное программирование 

__Инфраструктурный код - код, который вы вынуждены писать, чтобы что-то работало

##### Объявление делегата
```c#
public delegate int StringComparer(string x, string y);
```
- *delegate*  означает, что мы обьявляем делегатный тип, т.е. тип, указатель на метод
```c#
// На какие методы?
// те, которые принимают две строки:
(string x, string y)
// и имеют тип возвращаемого элемента:  
int
```
==StringComparer== - тип данных 
==Класс и Делегат - это тип данных==

##### Стоит различать
- когда мы используем метод для того чтобы ==вызвать этот метод==
- и когда мы используем метод для того ==чтобы передать ссылку== на него в другой метод и вызвать его попозже 
##### Делегат в памяти
- это всего навсего два указателя
	- указатель на метод, который хотим вызвать (указывает в оранжевую область)
	- ==только для динамических методов== указатель `target` указывает из контекста какого объекта нужно вызывать
		- *для статических методов указатель равен null*

[[Карта памяти делегата]]

[[Ключевое слово var]] 

##### Встроенные делегаты 

- `Func<T1, T2, ..., TResult>` *для методов, возвращающих значение (тип).*  У него последний дженерик-параметр — тип возвращаемого значения.
- `Action<T1, T2, ...>` *для методов, которые не возвращают значения (тип).*  Здесь `T1, T2, ...` — типы аргументов метода.
```c#
public static void Sort<T>(T[] array, Func<T, T, int> comparer)
{
	for (int i = array.Length - 1; i > 0; i--)
		for (int j = 1; j <= i; j++)
			{
				var element1 = array[j - 1];
				var element2 = array[j];
				//раз это указатель на функцию, значит,эту функцию можно вызвать
				if (comparer(element1, element2) > 0)
				{
					var temporary = array[j];
					array[j] = array[j - 1];
					array[j - 1] = temporary;
				}
			}
}
```


1. [[Делегатный тип]]
2. [[Анонимные делегаты]]
3. [[Лямбда-выражения]]
4. [[Замыкание]]
5. [[Ловушка замыкания]]

### [[Мультикаст-делегат]]